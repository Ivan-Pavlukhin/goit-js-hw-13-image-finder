{"version":3,"sources":["webpack:///./handelbars/image-markup.hbs","webpack:///./apiService.js","webpack:///./scripts/windowAutoScroll.js","webpack:///./index.js","webpack:///./handelbars/gallery-markup.hbs","webpack:///./handelbars/form-markup.hbs"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","alias1","lambda","alias2","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","nullContext","program","noop","ImageApiService","this","searchQuery","page","resetPage","fetchImages","url","BASS_URL","fetch","then","response","json","hits","catch","error","console","log","newQuery","ScrollWindow","galleryHight","scroll","window","scrollTo","top","newGalleryH","scrollWindow","imagesApiService","ImagesApiService","bodyRef","document","querySelector","insertAdjacentHTML","formTpl","gallery","ref","form","searchButton","loadMore","appendImagesMarkup","images","imageTpl","addEventListener","e","preventDefault","innerHTML","query","currentTarget","value","galleryH","scrollHeight"],"mappings":"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","file":"main.8068652b9052e0a4c47d.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var alias1=container.lambda, alias2=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"photo-card\\\">\\r\\n    <img src=\\\"\"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0), depth0))\n    + \"\\\" alt=\\\"\\\" />\\r\\n\\r\\n    <div class=\\\"stats\\\">\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n            \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">visibility</i>\\r\\n            \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">comment</i>\\r\\n            \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n        </p>\\r\\n        <p class=\\\"stats-item\\\">\\r\\n            <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n            \"\n    + alias2(alias1((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n        </p>\\r\\n    </div>\\r\\n</div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":24,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","const BASS_URL = 'https://pixabay.com/api/';\r\nconst API_KEY = '21045573-d699147f44aaa00ba6588ddf4';\r\n\r\nexport default class ImageApiService {\r\n  constructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n  }\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  fetchImages() {\r\n    const url = `${BASS_URL}?image_type=photo&orientation=horizontal&page=${this.page}&per_page=12&key=${API_KEY}&q=${this.searchQuery}`;\r\n\r\n    return fetch(url)\r\n      .then(response => response.json())\r\n      .then(data => {\r\n        this.page += 1;\r\n        return data.hits;\r\n      })\r\n      .catch(error => console.log(error));\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n}\r\n","export default class ScrollWindow {\r\n  constructor() {\r\n    this.galleryHight = 0;\r\n  }\r\n\r\n  scroll() {\r\n    window.scrollTo({\r\n      top: this.galleryHight,\r\n    });\r\n  }\r\n\r\n  get galleryH() {\r\n    return this.galleryHight;\r\n  }\r\n\r\n  set galleryH(newGalleryH) {\r\n    this.galleryHight = newGalleryH;\r\n  }\r\n}\r\n","import './styles.css';\r\nimport ImagesApiService from './apiService';\r\nimport ScrollWindow from './scripts/windowAutoScroll';\r\nimport formTpl from './handelbars/form-markup.hbs';\r\nimport gallery from './handelbars/gallery-markup.hbs';\r\nimport imageTpl from './handelbars/image-markup.hbs';\r\nconst scrollWindow = new ScrollWindow();\r\nconst imagesApiService = new ImagesApiService();\r\n\r\nconst bodyRef = document.querySelector('body');\r\n\r\nbodyRef.insertAdjacentHTML('afterbegin', formTpl());\r\nbodyRef.insertAdjacentHTML('beforeend', gallery());\r\n\r\nconst ref = {\r\n  form: document.querySelector('.search-form'),\r\n  searchButton: document.querySelector('.search-button'),\r\n  loadMore: document.querySelector('.load-more'),\r\n  gallery: document.querySelector('.gallery'),\r\n};\r\n\r\nref.form.addEventListener('submit', searchImage);\r\nref.loadMore.addEventListener('click', onLoadMore);\r\n\r\nfunction onLoadMore() {\r\n  return imagesApiService.fetchImages().then(images => {\r\n    scrollWindow.galleryH = ref.gallery.scrollHeight;\r\n    appendImagesMarkup(images);\r\n\r\n    scrollWindow.scroll();\r\n  });\r\n}\r\n\r\nfunction searchImage(e) {\r\n  e.preventDefault();\r\n  clearImageContainer();\r\n  imagesApiService.query = e.currentTarget.query.value;\r\n  imagesApiService.resetPage();\r\n  imagesApiService.fetchImages().then(images => {\r\n    appendImagesMarkup(images);\r\n  });\r\n}\r\n\r\nfunction appendImagesMarkup(images) {\r\n  ref.gallery.insertAdjacentHTML('beforeend', imageTpl(images));\r\n}\r\n\r\nfunction clearImageContainer() {\r\n  ref.gallery.innerHTML = '';\r\n}\r\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<ul class=\\\"gallery\\\">\\r\\n    <!-- Список <li> с карточками изображений -->\\r\\n</ul>\\r\\n<button type=\\\"button\\\" class=\\\"load-more\\\">Load more</button>\";\n},\"useData\":true});","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<form class=\\\"search-form\\\" id=\\\"search-form\\\">\\r\\n    <input class=\\\"input\\\" type=\\\"text\\\" name=\\\"query\\\" autocomplete=\\\"off\\\" placeholder=\\\"Search images...\\\" />\\r\\n    <button class=\\\"button\\\" type=\\\"submit\\\" class=\\\"search-button\\\">Search</button>\\r\\n</form>\";\n},\"useData\":true});"],"sourceRoot":""}